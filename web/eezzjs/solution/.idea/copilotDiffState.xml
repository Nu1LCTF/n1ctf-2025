<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/http-request-sample.js">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/http-request-sample.js" />
              <option name="updatedContent" value="&quot;use strict&quot;;&#10;&#10;const http = require(&quot;http&quot;);&#10;const https = require(&quot;https&quot;);&#10;const { URL } = require(&quot;url&quot;);&#10;&#10;function request({ method = &quot;GET&quot;, url, headers = {}, data, timeout = 8000 }) {&#10;  return new Promise((resolve, reject) =&gt; {&#10;    if (!url) return reject(new Error(&quot;url is required&quot;));&#10;&#10;    const u = new URL(url);&#10;    const isHttps = u.protocol === &quot;https:&quot;;&#10;    const transport = isHttps ? https : http;&#10;&#10;    const options = {&#10;      method,&#10;      hostname: u.hostname,&#10;      port: u.port || (isHttps ? 443 : 80),&#10;      path: `${u.pathname}${u.search}`,&#10;      headers: {&#10;        &quot;User-Agent&quot;: &quot;eezzjs-poc-http/1.0&quot;,&#10;        ...headers,&#10;      },&#10;    };&#10;&#10;    let bodyStr;&#10;    if (data !== undefined &amp;&amp; data !== null &amp;&amp; method !== &quot;GET&quot;) {&#10;      if (typeof data === &quot;string&quot; || Buffer.isBuffer(data)) {&#10;        bodyStr = data;&#10;      } else {&#10;        bodyStr = JSON.stringify(data);&#10;        if (!options.headers[&quot;Content-Type&quot;] &amp;&amp; !options.headers[&quot;content-type&quot;]) {&#10;          options.headers[&quot;Content-Type&quot;] = &quot;application/json&quot;;&#10;        }&#10;      }&#10;      options.headers[&quot;Content-Length&quot;] = Buffer.byteLength(bodyStr);&#10;    }&#10;&#10;    const req = transport.request(options, (res) =&gt; {&#10;      const chunks = [];&#10;      res.on(&quot;data&quot;, (c) =&gt; chunks.push(c));&#10;      res.on(&quot;end&quot;, () =&gt; {&#10;        const raw = Buffer.concat(chunks).toString(&quot;utf8&quot;);&#10;        let parsed = null;&#10;        try { parsed = JSON.parse(raw); } catch (_) {}&#10;        resolve({&#10;          statusCode: res.statusCode,&#10;          headers: res.headers,&#10;          body: raw,&#10;          json: parsed,&#10;        });&#10;      });&#10;    });&#10;&#10;    req.on(&quot;error&quot;, reject);&#10;&#10;    if (timeout) {&#10;      req.setTimeout(timeout, () =&gt; {&#10;        req.destroy(new Error(`Request timed out after ${timeout} ms`));&#10;      });&#10;    }&#10;&#10;    if (bodyStr !== undefined) req.write(bodyStr);&#10;    req.end();&#10;  });&#10;}&#10;&#10;function get(url, headers = {}, timeout) {&#10;  return request({ method: &quot;GET&quot;, url, headers, timeout });&#10;}&#10;&#10;function post(url, data, headers = {}, timeout) {&#10;  return request({ method: &quot;POST&quot;, url, headers, data, timeout });&#10;}&#10;&#10;if (require.main === module) {&#10;  (async () =&gt; {&#10;    try {&#10;      const r1 = await get(&#10;        &quot;https://jsonplaceholder.typicode.com/todos/1&quot;,&#10;        { Accept: &quot;application/json&quot; },&#10;        5000&#10;      );&#10;      console.log(&quot;GET status:&quot;, r1.statusCode);&#10;      console.log(&quot;GET body:&quot;, r1.json || r1.body);&#10;&#10;      const r2 = await post(&#10;        &quot;https://httpbin.org/post&quot;,&#10;        { username: &quot;admin&quot;, ok: true },&#10;        { Accept: &quot;application/json&quot; },&#10;        5000&#10;      );&#10;      console.log(&quot;POST status:&quot;, r2.statusCode);&#10;      console.log(&quot;POST json keys:&quot;, r2.json &amp;&amp; Object.keys(r2.json));&#10;    } catch (err) {&#10;      console.error(&quot;Request error:&quot;, err.message);&#10;    }&#10;  })();&#10;}&#10;&#10;module.exports = { request, get, post };&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>